<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mod Manager Pro</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #3b82f6;
            --secondary: #10b981;
            --dark: #1e293b;
            --darker: #0f172a;
            --light: #f1f5f9;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--darker);
            color: var(--light);
            min-height: 100vh;
        }
        
        .gradient-text {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--dark);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }
        
        /* Loading spinner */
        .loader {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Animation for mod cards */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <!-- Header/Navbar -->
    <header class="bg-gray-900 text-white shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-gamepad text-2xl text-blue-400"></i>
                    <h1 class="text-2xl font-bold gradient-text">ModHub ID</h1>
                </div>
                
                <nav class="hidden md:flex items-center space-x-4">
                    <button onclick="showPage('home')" class="nav-btn active">
                        <i class="fas fa-home mr-2"></i> Beranda
                    </button>
                    <button onclick="showPage('games')" class="nav-btn">
                        <i class="fas fa-gamepad mr-2"></i> Games
                    </button>
                    <button onclick="showPage('forum')" class="nav-btn">
                        <i class="fas fa-comments mr-2"></i> Forum
                    </button>
                    <button onclick="showPage('uploads')" class="nav-btn">
                        <i class="fas fa-cloud-upload-alt mr-2"></i> Unggahan
                    </button>
                    <div id="authButtons" class="flex items-center space-x-2">
                        <button onclick="showPage('login')" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-full transition">
                            <i class="fas fa-sign-in-alt mr-2"></i> Masuk
                        </button>
                        <button onclick="showPage('register')" class="px-4 py-2 bg-green-600 hover:bg-green-700 rounded-full transition">
                            <i class="fas fa-user-plus mr-2"></i> Daftar
                        </button>
                    </div>
                    <div id="userMenu" class="hidden relative">
                        <button id="userMenuButton" class="flex items-center space-x-2">
                            <img id="userAvatar" src="https://ui-avatars.com/api/?background=3b82f6&color=fff" alt="User" class="w-8 h-8 rounded-full">
                            <span id="usernameDisplay">User</span>
                            <i class="fas fa-chevron-down text-xs"></i>
                        </button>
                        <div id="userDropdown" class="hidden absolute right-0 mt-2 w-48 bg-gray-800 rounded-md shadow-lg py-1 z-50">
                            <button onclick="showPage('profile')" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 w-full text-left">
                                <i class="fas fa-user mr-2"></i> Profil
                            </button>
                            <button onclick="showPage('uploads')" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 w-full text-left">
                                <i class="fas fa-cloud-upload-alt mr-2"></i> Unggahan Saya
                            </button>
                            <button onclick="logout()" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 w-full text-left">
                                <i class="fas fa-sign-out-alt mr-2"></i> Keluar
                            </button>
                        </div>
                    </div>
                </nav>
                
                <!-- Mobile menu button -->
                <button id="mobileMenuButton" class="md:hidden text-white focus:outline-none">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
        
        <!-- Mobile menu -->
        <div id="mobileMenu" class="md:hidden hidden bg-gray-800 px-4 py-2">
            <button onclick="showPage('home')" class="block w-full text-left py-2 px-4 rounded hover:bg-gray-700">
                <i class="fas fa-home mr-2"></i> Beranda
            </button>
            <button onclick="showPage('games')" class="block w-full text-left py-2 px-4 rounded hover:bg-gray-700">
                <i class="fas fa-gamepad mr-2"></i> Games
            </button>
            <button onclick="showPage('forum')" class="block w-full text-left py-2 px-4 rounded hover:bg-gray-700">
                <i class="fas fa-comments mr-2"></i> Forum
            </button>
            <button onclick="showPage('uploads')" class="block w-full text-left py-2 px-4 rounded hover:bg-gray-700">
                <i class="fas fa-cloud-upload-alt mr-2"></i> Unggahan
            </button>
            <div class="border-t border-gray-700 my-2"></div>
            <div id="mobileAuthButtons" class="py-2">
                <button onclick="showPage('login')" class="w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 rounded mb-2">
                    <i class="fas fa-sign-in-alt mr-2"></i> Masuk
                </button>
                <button onclick="showPage('register')" class="w-full py-2 px-4 bg-green-600 hover:bg-green-700 rounded">
                    <i class="fas fa-user-plus mr-2"></i> Daftar
                </button>
            </div>
            <div id="mobileUserMenu" class="hidden py-2">
                <button onclick="showPage('profile')" class="block w-full text-left py-2 px-4 rounded hover:bg-gray-700">
                    <i class="fas fa-user mr-2"></i> Profil
                </button>
                <button onclick="showPage('uploads')" class="block w-full text-left py-2 px-4 rounded hover:bg-gray-700">
                    <i class="fas fa-cloud-upload-alt mr-2"></i> Unggahan Saya
                </button>
                <button onclick="logout()" class="block w-full text-left py-2 px-4 rounded hover:bg-gray-700">
                    <i class="fas fa-sign-out-alt mr-2"></i> Keluar
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-20">
        <!-- Home Page -->
        <section id="homePage" class="page active">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold gradient-text">Mod Terpopuler</h2>
                <button onclick="showPage('uploadForm')" class="px-4 py-2 gradient-bg text-white rounded-full hover:opacity-90 transition">
                    <i class="fas fa-plus mr-2"></i> Unggah Mod
                </button>
            </div>
            
            <div id="featuredMods" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-12">
                <!-- Featured mods will be loaded here -->
            </div>
            
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold gradient-text">Diskusi Terbaru</h2>
                <button onclick="showPage('forum')" class="px-4 py-2 bg-gray-700 text-white rounded-full hover:bg-gray-600 transition">
                    Lihat Semua <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
            
            <div id="recentThreads" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Recent forum threads will be loaded here -->
            </div>
        </section>

        <!-- Games Page -->
        <section id="gamesPage" class="page hidden">
            <h2 class="text-3xl font-bold gradient-text mb-8">Daftar Game</h2>
            
            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4 text-blue-400">Grand Theft Auto Series</h3>
                <div id="gtaGames" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                    <!-- GTA games will be loaded here -->
                </div>
            </div>
            
            <div class="mb-8">
                <h3 class="text-xl font-semibold mb-4 text-green-400">Game Lainnya</h3>
                <div id="otherGames" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                    <!-- Other games will be loaded here -->
                </div>
            </div>
        </section>

        <!-- Mods by Game Page -->
        <section id="modsByGamePage" class="page hidden">
            <button onclick="showPage('games')" class="mb-6 px-4 py-2 bg-gray-700 text-white rounded-full hover:bg-gray-600 transition">
                <i class="fas fa-arrow-left mr-2"></i> Kembali ke Daftar Game
            </button>
            
            <div class="flex justify-between items-center mb-8">
                <h2 id="gameModsTitle" class="text-3xl font-bold gradient-text"></h2>
                <button onclick="showPage('uploadForm')" class="px-4 py-2 gradient-bg text-white rounded-full hover:opacity-90 transition">
                    <i class="fas fa-plus mr-2"></i> Unggah Mod
                </button>
            </div>
            
            <div id="modsByGameList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                <!-- Mods for selected game will be loaded here -->
            </div>
            
            <div id="noModsForGame" class="text-center py-12 hidden">
                <i class="fas fa-box-open text-5xl text-gray-500 mb-4"></i>
                <h3 class="text-xl font-semibold text-gray-400">Belum ada mod untuk game ini</h3>
                <p class="text-gray-500 mb-4">Jadilah yang pertama mengunggah mod untuk game ini!</p>
                <button onclick="showPage('uploadForm')" class="px-4 py-2 gradient-bg text-white rounded-full hover:opacity-90 transition">
                    <i class="fas fa-plus mr-2"></i> Unggah Mod
                </button>
            </div>
        </section>

        <!-- Upload Form Page -->
        <section id="uploadFormPage" class="page hidden">
            <div class="max-w-4xl mx-auto">
                <button onclick="showPage('home')" class="mb-6 px-4 py-2 bg-gray-700 text-white rounded-full hover:bg-gray-600 transition">
                    <i class="fas fa-arrow-left mr-2"></i> Kembali
                </button>
                
                <div class="bg-gray-800 rounded-xl shadow-lg p-6">
                    <h2 class="text-2xl font-bold gradient-text mb-6 text-center">Unggah Mod Baru</h2>
                    
                    <form id="modUploadForm" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="gameName" class="block text-gray-300 font-medium mb-2">Pilih Game</label>
                                <select id="gameName" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                                    <option value="">-- Pilih Game --</option>
                                    <!-- Games will be populated here -->
                                </select>
                            </div>
                            
                            <div>
                                <label for="modName" class="block text-gray-300 font-medium mb-2">Nama Mod</label>
                                <input type="text" id="modName" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Contoh: Modpack Realisme" required>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label for="modVersion" class="block text-gray-300 font-medium mb-2">Versi Mod</label>
                                <input type="text" id="modVersion" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Contoh: 1.0.0" required>
                            </div>
                            
                            <div>
                                <label for="modCategory" class="block text-gray-300 font-medium mb-2">Kategori</label>
                                <select id="modCategory" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                                    <option value="Mods">Mods</option>
                                    <option value="Modpack">Modpack</option>
                                    <option value="Skin">Skin</option>
                                    <option value="Texture">Texture</option>
                                    <option value="Script">Script</option>
                                    <option value="Lainnya">Lainnya</option>
                                </select>
                            </div>
                            
                            <div>
                                <label for="modLanguage" class="block text-gray-300 font-medium mb-2">Bahasa</label>
                                <input type="text" id="modLanguage" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Contoh: Indonesia, English" required>
                            </div>
                        </div>
                        
                        <div>
                            <label for="modDescription" class="block text-gray-300 font-medium mb-2">Deskripsi Mod</label>
                            <textarea id="modDescription" rows="5" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Jelaskan tentang mod Anda..." required></textarea>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="modFileLink" class="block text-gray-300 font-medium mb-2">Link File Mod</label>
                                <input type="url" id="modFileLink" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Contoh: https://drive.google.com/mod.zip" required>
                            </div>
                            
                            <div>
                                <label for="modSource" class="block text-gray-300 font-medium mb-2">Sumber Mod (Opsional)</label>
                                <input type="url" id="modSource" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Contoh: https://www.gtainside.com">
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="modMainPhoto" class="block text-gray-300 font-medium mb-2">URL Gambar Utama</label>
                                <input type="url" id="modMainPhoto" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="URL gambar thumbnail" required>
                            </div>
                            
                            <div>
                                <label for="modSmallPhoto" class="block text-gray-300 font-medium mb-2">URL Gambar Detail</label>
                                <input type="url" id="modSmallPhoto" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="URL gambar untuk halaman detail" required>
                            </div>
                        </div>
                        
                        <div>
                            <label for="modVideoTutorial" class="block text-gray-300 font-medium mb-2">URL Video Tutorial (Opsional)</label>
                            <input type="url" id="modVideoTutorial" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Contoh: https://youtube.com/watch?v=...">
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="flex items-center space-x-2">
                                    <input type="checkbox" id="isOwnMod" class="form-checkbox text-blue-500 rounded">
                                    <span class="text-gray-300">Mod ini buatan saya</span>
                                </label>
                                
                                <div id="authorNameContainer" class="mt-4 hidden">
                                    <label for="customAuthorName" class="block text-gray-300 font-medium mb-2">Nama Pembuat Mod</label>
                                    <input type="text" id="customAuthorName" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Nama pembuat asli mod">
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-gray-300 font-medium mb-2">Visibilitas</label>
                                <div class="space-y-2">
                                    <label class="flex items-center space-x-2">
                                        <input type="radio" name="visibility" value="Public" checked class="form-radio text-blue-500">
                                        <span class="text-gray-300">Publik (Semua orang bisa melihat)</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="radio" name="visibility" value="Private" class="form-radio text-blue-500">
                                        <span class="text-gray-300">Privat (Hanya saya yang bisa melihat)</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="pt-4">
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" id="isPaidMod" class="form-checkbox text-blue-500 rounded">
                                <span class="text-gray-300">Ini adalah mod berbayar</span>
                            </label>
                            <p class="text-xs text-yellow-500 mt-2">Pastikan Anda memiliki izin untuk mendistribusikan mod berbayar ini.</p>
                        </div>
                        
                        <div class="pt-6">
                            <button type="submit" class="w-full gradient-bg text-white py-3 px-6 rounded-lg font-semibold hover:opacity-90 transition flex items-center justify-center">
                                <i class="fas fa-cloud-upload-alt mr-2"></i> Unggah Mod
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- My Uploads Page -->
        <section id="uploadsPage" class="page hidden">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold gradient-text">Unggahan Saya</h2>
                <button onclick="showPage('uploadForm')" class="px-4 py-2 gradient-bg text-white rounded-full hover:opacity-90 transition">
                    <i class="fas fa-plus mr-2"></i> Unggah Mod Baru
                </button>
            </div>
            
            <div id="myUploadsList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                <!-- User's mods will be loaded here -->
            </div>
            
            <div id="noUploadsMessage" class="text-center py-12 hidden">
                <i class="fas fa-cloud-upload-alt text-5xl text-gray-500 mb-4"></i>
                <h3 class="text-xl font-semibold text-gray-400">Anda belum mengunggah mod apapun</h3>
                <p class="text-gray-500 mb-4">Mulailah berbagi mod Anda dengan komunitas!</p>
                <button onclick="showPage('uploadForm')" class="px-4 py-2 gradient-bg text-white rounded-full hover:opacity-90 transition">
                    <i class="fas fa-plus mr-2"></i> Unggah Mod Pertama
                </button>
            </div>
        </section>

        <!-- Forum Page -->
        <section id="forumPage" class="page hidden">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold gradient-text">Forum Diskusi</h2>
                <button onclick="showPage('newThread')" class="px-4 py-2 gradient-bg text-white rounded-full hover:opacity-90 transition">
                    <i class="fas fa-plus mr-2"></i> Buat Thread Baru
                </button>
            </div>
            
            <div class="bg-gray-800 rounded-xl shadow-lg overflow-hidden mb-8">
                <div class="grid grid-cols-12 bg-gray-700 text-gray-300 font-semibold p-4">
                    <div class="col-span-6 md:col-span-8">Thread</div>
                    <div class="col-span-2 text-center hidden md:block">Pembuat</div>
                    <div class="col-span-2 text-center">Balasan</div>
                    <div class="col-span-2 text-center hidden md:block">Terakhir</div>
                </div>
                
                <div id="forumThreadsList">
                    <!-- Forum threads will be loaded here -->
                </div>
            </div>
            
            <div id="noThreadsMessage" class="text-center py-12 hidden">
                <i class="fas fa-comments text-5xl text-gray-500 mb-4"></i>
                <h3 class="text-xl font-semibold text-gray-400">Belum ada thread diskusi</h3>
                <p class="text-gray-500 mb-4">Mulailah diskusi pertama Anda!</p>
                <button onclick="showPage('newThread')" class="px-4 py-2 gradient-bg text-white rounded-full hover:opacity-90 transition">
                    <i class="fas fa-plus mr-2"></i> Buat Thread Baru
                </button>
            </div>
        </section>

        <!-- New Thread Page -->
        <section id="newThreadPage" class="page hidden">
            <button onclick="showPage('forum')" class="mb-6 px-4 py-2 bg-gray-700 text-white rounded-full hover:bg-gray-600 transition">
                <i class="fas fa-arrow-left mr-2"></i> Kembali ke Forum
            </button>
            
            <div class="bg-gray-800 rounded-xl shadow-lg p-6 max-w-3xl mx-auto">
                <h2 class="text-2xl font-bold gradient-text mb-6 text-center">Buat Thread Baru</h2>
                
                <form id="newThreadForm" class="space-y-6">
                    <div>
                        <label for="threadTitle" class="block text-gray-300 font-medium mb-2">Judul Thread</label>
                        <input type="text" id="threadTitle" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Masukkan judul thread" required>
                    </div>
                    
                    <div>
                        <label for="threadCategory" class="block text-gray-300 font-medium mb-2">Kategori</label>
                        <select id="threadCategory" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                            <option value="">-- Pilih Kategori --</option>
                            <option value="Diskusi Umum">Diskusi Umum</option>
                            <option value="Bantuan">Bantuan</option>
                            <option value="Pembaruan Mod">Pembaruan Mod</option>
                            <option value="Permintaan Mod">Permintaan Mod</option>
                            <option value="Bug & Masalah">Bug & Masalah</option>
                            <option value="Lainnya">Lainnya</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="threadContent" class="block text-gray-300 font-medium mb-2">Isi Thread</label>
                        <textarea id="threadContent" rows="8" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Tulis isi thread Anda di sini..." required></textarea>
                    </div>
                    
                    <div class="pt-4">
                        <button type="submit" class="w-full gradient-bg text-white py-3 px-6 rounded-lg font-semibold hover:opacity-90 transition flex items-center justify-center">
                            <i class="fas fa-paper-plane mr-2"></i> Posting Thread
                        </button>
                    </div>
                </form>
            </div>
        </section>

        <!-- Thread Detail Page -->
        <section id="threadPage" class="page hidden">
            <button onclick="showPage('forum')" class="mb-6 px-4 py-2 bg-gray-700 text-white rounded-full hover:bg-gray-600 transition">
                <i class="fas fa-arrow-left mr-2"></i> Kembali ke Forum
            </button>
            
            <div class="bg-gray-800 rounded-xl shadow-lg p-6 mb-6">
                <div class="flex justify-between items-start mb-4">
                    <div>
                        <h2 id="threadTitle" class="text-2xl font-bold text-white mb-2"></h2>
                        <div class="flex items-center space-x-4 text-gray-400 text-sm">
                            <span id="threadAuthor"></span>
                            <span id="threadDate"></span>
                            <span id="threadCategory" class="px-2 py-1 bg-gray-700 rounded-full text-xs"></span>
                        </div>
                    </div>
                    <button id="threadActionsButton" class="text-gray-400 hover:text-white">
                        <i class="fas fa-ellipsis-v"></i>
                    </button>
                </div>
                
                <div id="threadContent" class="prose prose-invert max-w-none text-gray-300 mb-6">
                    <!-- Thread content will be loaded here -->
                </div>
                
                <div class="flex items-center space-x-4 border-t border-gray-700 pt-4">
                    <button id="likeThreadBtn" class="flex items-center space-x-1 text-gray-400 hover:text-blue-400">
                        <i class="far fa-thumbs-up"></i>
                        <span id="likeCount">0</span>
                    </button>
                    <button id="replyThreadBtn" class="flex items-center space-x-1 text-gray-400 hover:text-green-400">
                        <i class="far fa-comment"></i>
                        <span>Balas</span>
                    </button>
                </div>
            </div>
            
            <div id="repliesContainer" class="space-y-4">
                <!-- Replies will be loaded here -->
            </div>
            
            <div class="bg-gray-800 rounded-xl shadow-lg p-6 mt-6">
                <h3 class="text-xl font-semibold text-white mb-4">Tulis Balasan</h3>
                <form id="replyForm" class="space-y-4">
                    <textarea id="replyContent" rows="4" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Tulis balasan Anda di sini..." required></textarea>
                    <button type="submit" class="px-4 py-2 gradient-bg text-white rounded-lg font-semibold hover:opacity-90 transition">
                        <i class="fas fa-paper-plane mr-2"></i> Kirim Balasan
                    </button>
                </form>
            </div>
        </section>

        <!-- Login Page -->
        <section id="loginPage" class="page hidden">
            <div class="max-w-md mx-auto bg-gray-800 rounded-xl shadow-lg p-8">
                <div class="text-center mb-8">
                    <i class="fas fa-sign-in-alt text-5xl gradient-text mb-4"></i>
                    <h2 class="text-2xl font-bold text-white">Masuk ke Akun Anda</h2>
                    <p class="text-gray-400">Silakan masuk untuk mengakses fitur lengkap</p>
                </div>
                
                <form id="loginForm" class="space-y-6">
                    <div>
                        <label for="loginUsername" class="block text-gray-300 font-medium mb-2">Username</label>
                        <input type="text" id="loginUsername" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Masukkan username" required>
                    </div>
                    
                    <div>
                        <label for="loginPassword" class="block text-gray-300 font-medium mb-2">Password</label>
                        <input type="password" id="loginPassword" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Masukkan password" required>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <label class="flex items-center space-x-2">
                            <input type="checkbox" id="rememberMe" class="form-checkbox text-blue-500 rounded">
                            <span class="text-gray-300">Ingat saya</span>
                        </label>
                        
                        <button type="button" onclick="showPage('forgotPassword')" class="text-blue-400 hover:text-blue-300 text-sm">
                            Lupa password?
                        </button>
                    </div>
                    
                    <div class="pt-4">
                        <button type="submit" class="w-full gradient-bg text-white py-3 px-6 rounded-lg font-semibold hover:opacity-90 transition">
                            <i class="fas fa-sign-in-alt mr-2"></i> Masuk
                        </button>
                    </div>
                </form>
                
                <div class="text-center mt-6">
                    <p class="text-gray-400">Belum punya akun? <button onclick="showPage('register')" class="text-blue-400 hover:text-blue-300">Daftar sekarang</button></p>
                </div>
            </div>
        </section>

        <!-- Register Page -->
        <section id="registerPage" class="page hidden">
            <div class="max-w-md mx-auto bg-gray-800 rounded-xl shadow-lg p-8">
                <div class="text-center mb-8">
                    <i class="fas fa-user-plus text-5xl gradient-text mb-4"></i>
                    <h2 class="text-2xl font-bold text-white">Buat Akun Baru</h2>
                    <p class="text-gray-400">Bergabunglah dengan komunitas modding kami</p>
                </div>
                
                <form id="registerForm" class="space-y-6">
                    <div>
                        <label for="registerUsername" class="block text-gray-300 font-medium mb-2">Username</label>
                        <input type="text" id="registerUsername" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Pilih username" required>
                    </div>
                    
                    <div>
                        <label for="registerEmail" class="block text-gray-300 font-medium mb-2">Email</label>
                        <input type="email" id="registerEmail" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Masukkan email Anda" required>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="registerPassword" class="block text-gray-300 font-medium mb-2">Password</label>
                            <input type="password" id="registerPassword" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Buat password" required>
                        </div>
                        
                        <div>
                            <label for="registerConfirmPassword" class="block text-gray-300 font-medium mb-2">Konfirmasi Password</label>
                            <input type="password" id="registerConfirmPassword" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Ulangi password" required>
                        </div>
                    </div>
                    
                    <div class="pt-4">
                        <button type="submit" class="w-full gradient-bg text-white py-3 px-6 rounded-lg font-semibold hover:opacity-90 transition">
                            <i class="fas fa-user-plus mr-2"></i> Daftar
                        </button>
                    </div>
                </form>
                
                <div class="text-center mt-6">
                    <p class="text-gray-400">Sudah punya akun? <button onclick="showPage('login')" class="text-blue-400 hover:text-blue-300">Masuk di sini</button></p>
                </div>
            </div>
        </section>

        <!-- Profile Page -->
        <section id="profilePage" class="page hidden">
            <div class="max-w-4xl mx-auto">
                <div class="bg-gray-800 rounded-xl shadow-lg overflow-hidden">
                    <div class="relative">
                        <div class="h-32 bg-gradient-to-r from-blue-600 to-green-500"></div>
                        <div class="absolute -bottom-16 left-6">
                            <img id="profileAvatar" src="https://ui-avatars.com/api/?background=3b82f6&color=fff" alt="Profile" class="w-32 h-32 rounded-full border-4 border-gray-800">
                        </div>
                    </div>
                    
                    <div class="pt-20 px-6 pb-6">
                        <div class="flex justify-between items-start mb-6">
                            <div>
                                <h2 id="profileUsername" class="text-2xl font-bold text-white"></h2>
                                <p id="profileEmail" class="text-gray-400"></p>
                            </div>
                            <button onclick="showPage('editProfile')" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-full text-white transition">
                                <i class="fas fa-edit mr-2"></i> Edit Profil
                            </button>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-gray-400 font-medium mb-2">Total Unggahan</h3>
                                <p id="totalUploads" class="text-2xl font-bold text-white">0</p>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-gray-400 font-medium mb-2">Total Thread</h3>
                                <p id="totalThreads" class="text-2xl font-bold text-white">0</p>
                            </div>
                            <div class="bg-gray-700 p-4 rounded-lg">
                                <h3 class="text-gray-400 font-medium mb-2">Bergabung</h3>
                                <p id="joinDate" class="text-2xl font-bold text-white">-</p>
                            </div>
                        </div>
                        
                        <div class="mb-8">
                            <h3 class="text-xl font-semibold text-white mb-4">Unggahan Terbaru</h3>
                            <div id="profileUploads" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                                <!-- User's recent uploads will be loaded here -->
                            </div>
                            <div id="noProfileUploads" class="text-center py-8 hidden">
                                <i class="fas fa-box-open text-3xl text-gray-500 mb-2"></i>
                                <p class="text-gray-400">Belum ada unggahan</p>
                            </div>
                        </div>
                        
                        <div>
                            <h3 class="text-xl font-semibold text-white mb-4">Thread Terbaru</h3>
                            <div id="profileThreads" class="space-y-4">
                                <!-- User's recent threads will be loaded here -->
                            </div>
                            <div id="noProfileThreads" class="text-center py-8 hidden">
                                <i class="fas fa-comments text-3xl text-gray-500 mb-2"></i>
                                <p class="text-gray-400">Belum ada thread</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Edit Profile Page -->
        <section id="editProfilePage" class="page hidden">
            <div class="max-w-2xl mx-auto">
                <button onclick="showPage('profile')" class="mb-6 px-4 py-2 bg-gray-700 text-white rounded-full hover:bg-gray-600 transition">
                    <i class="fas fa-arrow-left mr-2"></i> Kembali ke Profil
                </button>
                
                <div class="bg-gray-800 rounded-xl shadow-lg p-6">
                    <h2 class="text-2xl font-bold gradient-text mb-6 text-center">Edit Profil</h2>
                    
                    <form id="editProfileForm" class="space-y-6">
                        <div class="flex flex-col items-center">
                            <img id="editProfileAvatar" src="https://ui-avatars.com/api/?background=3b82f6&color=fff" alt="Profile" class="w-24 h-24 rounded-full mb-4">
                            <button type="button" onclick="changeAvatar()" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-full text-white transition text-sm">
                                <i class="fas fa-camera mr-2"></i> Ubah Avatar
                            </button>
                        </div>
                        
                        <div>
                            <label for="editUsername" class="block text-gray-300 font-medium mb-2">Username</label>
                            <input type="text" id="editUsername" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                        
                        <div>
                            <label for="editEmail" class="block text-gray-300 font-medium mb-2">Email</label>
                            <input type="email" id="editEmail" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                        
                        <div>
                            <label for="editBio" class="block text-gray-300 font-medium mb-2">Bio</label>
                            <textarea id="editBio" rows="3" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Ceritakan sedikit tentang diri Anda"></textarea>
                        </div>
                        
                        <div class="pt-4">
                            <button type="submit" class="w-full gradient-bg text-white py-3 px-6 rounded-lg font-semibold hover:opacity-90 transition">
                                <i class="fas fa-save mr-2"></i> Simpan Perubahan
                            </button>
                        </div>
                    </form>
                    
                    <div class="mt-8 pt-6 border-t border-gray-700">
                        <h3 class="text-xl font-semibold text-white mb-4">Ubah Password</h3>
                        <form id="changePasswordForm" class="space-y-4">
                            <div>
                                <label for="currentPassword" class="block text-gray-300 font-medium mb-2">Password Saat Ini</label>
                                <input type="password" id="currentPassword" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Masukkan password saat ini" required>
                            </div>
                            
                            <div>
                                <label for="newPassword" class="block text-gray-300 font-medium mb-2">Password Baru</label>
                                <input type="password" id="newPassword" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Masukkan password baru" required>
                            </div>
                            
                            <div>
                                <label for="confirmNewPassword" class="block text-gray-300 font-medium mb-2">Konfirmasi Password Baru</label>
                                <input type="password" id="confirmNewPassword" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Konfirmasi password baru" required>
                            </div>
                            
                            <div class="pt-2">
                                <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-lg font-semibold transition">
                                    <i class="fas fa-key mr-2"></i> Ubah Password
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-400 py-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold text-white mb-4">ModHub ID</h3>
                    <p class="mb-4">Platform berbagi mod game terbesar di Indonesia. Temukan dan bagikan mod terbaik untuk game favorit Anda.</p>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-discord"></i></a>
                    </div>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold text-white mb-4">Tautan Cepat</h4>
                    <ul class="space-y-2">
                        <li><button onclick="showPage('home')" class="hover:text-white transition">Beranda</button></li>
                        <li><button onclick="showPage('games')" class="hover:text-white transition">Game</button></li>
                        <li><button onclick="showPage('forum')" class="hover:text-white transition">Forum</button></li>
                        <li><button onclick="showPage('uploads')" class="hover:text-white transition">Unggahan</button></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold text-white mb-4">Bantuan</h4>
                    <ul class="space-y-2">
                        <li><button onclick="showPage('faq')" class="hover:text-white transition">FAQ</button></li>
                        <li><button onclick="showPage('tos')" class="hover:text-white transition">Syarat & Ketentuan</button></li>
                        <li><button onclick="showPage('privacy')" class="hover:text-white transition">Kebijakan Privasi</button></li>
                        <li><button onclick="showPage('contact')" class="hover:text-white transition">Kontak Kami</button></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-lg font-semibold text-white mb-4">Newsletter</h4>
                    <p class="mb-4">Dapatkan pembaruan terbaru tentang mod dan event langsung ke email Anda.</p>
                    <div class="flex">
                        <input type="email" placeholder="Alamat email" class="px-4 py-2 bg-gray-700 text-white rounded-l-lg focus:outline-none w-full">
                        <button class="px-4 py-2 gradient-bg text-white rounded-r-lg hover:opacity-90 transition">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-800 mt-8 pt-6 text-center">
                <p>&copy; 2023 ModHub ID. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Modal -->
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="bg-gray-800 rounded-xl shadow-2xl max-w-md w-full mx-4 relative">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-400 hover:text-white">
                <i class="fas fa-times"></i>
            </button>
            
            <div id="modalContent" class="p-6">
                <!-- Modal content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Script -->
    <script>
        // =============================================
        // DATA STORAGE AND INITIALIZATION
        // =============================================
        
        // Initialize data storage
        if (!localStorage.getItem('modhub_users')) {
            localStorage.setItem('modhub_users', JSON.stringify([]));
        }
        
        if (!localStorage.getItem('modhub_mods')) {
            localStorage.setItem('modhub_mods', JSON.stringify([]));
        }
        
        if (!localStorage.getItem('modhub_games')) {
            const initialGames = [
                // GTA Series
                { id: 'gta_sa', name: 'GTA San Andreas', category: 'GTA', image: 'https://i.imgur.com/JQ6Yl5a.jpg' },
                { id: 'gta_v', name: 'GTA V', category: 'GTA', image: 'https://i.imgur.com/VvJxQjW.jpg' },
                { id: 'gta_iv', name: 'GTA IV', category: 'GTA', image: 'https://i.imgur.com/4XwZJ9k.jpg' },
                { id: 'gta_vc', name: 'GTA Vice City', category: 'GTA', image: 'https://i.imgur.com/8yYQ9ZL.jpg' },
                { id: 'gta_iii', name: 'GTA III', category: 'GTA', image: 'https://i.imgur.com/5tKv9Jj.jpg' },
                
                // Other games
                { id: 'minecraft', name: 'Minecraft', category: 'Other', image: 'https://i.imgur.com/5JQJQJQ.jpg' },
                { id: 'skyrim', name: 'The Elder Scrolls V: Skyrim', category: 'Other', image: 'https://i.imgur.com/6JQJQJQ.jpg' },
                { id: 'fallout4', name: 'Fallout 4', category: 'Other', image: 'https://i.imgur.com/7JQJQJQ.jpg' },
                { id: 'witcher3', name: 'The Witcher 3', category: 'Other', image: 'https://i.imgur.com/8JQJQJQ.jpg' },
                { id: 'cyberpunk', name: 'Cyberpunk 2077', category: 'Other', image: 'https://i.imgur.com/9JQJQJQ.jpg' },
                { id: 'rdr2', name: 'Red Dead Redemption 2', category: 'Other', image: 'https://i.imgur.com/0JQJQJQ.jpg' },
                { id: 'stardew', name: 'Stardew Valley', category: 'Other', image: 'https://i.imgur.com/1JQJQJQ.jpg' }
            ];
            localStorage.setItem('modhub_games', JSON.stringify(initialGames));
        }
        
        if (!localStorage.getItem('modhub_threads')) {
            localStorage.setItem('modhub_threads', JSON.stringify([]));
        }
        
        if (!localStorage.getItem('modhub_replies')) {
            localStorage.setItem('modhub_replies', JSON.stringify([]));
        }
        
        // Get current user from session
        let currentUser = JSON.parse(sessionStorage.getItem('modhub_current_user')) || null;
        
        // =============================================
        // UTILITY FUNCTIONS
        // =============================================
        
        // Format date
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };
            return new Date(dateString).toLocaleDateString('id-ID', options);
        }
        
        // Show modal
        function showModal(title, content, isHtml = false) {
            document.getElementById('modal').classList.remove('hidden');
            document.getElementById('modalContent').innerHTML = `
                <h3 class="text-xl font-bold text-white mb-4">${title}</h3>
                ${isHtml ? content : `<p class="text-gray-300">${content}</p>`}
                <div class="mt-6 flex justify-end">
                    <button onclick="closeModal()" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white transition">
                        Tutup
                    </button>
                </div>
            `;
        }
        
        // Close modal
        function closeModal() {
            document.getElementById('modal').classList.add('hidden');
        }
        
        // Show page
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.add('hidden');
            });
            
            // Show selected page
            document.getElementById(`${pageId}Page`).classList.remove('hidden');
            
            // Close mobile menu
            document.getElementById('mobileMenu').classList.add('hidden');
            
            // Update active nav button
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Load data for specific pages
            switch(pageId) {
                case 'home':
                    loadFeaturedMods();
                    loadRecentThreads();
                    document.querySelector('.nav-btn[onclick="showPage(\'home\')"]').classList.add('active');
                    break;
                case 'games':
                    loadGames();
                    document.querySelector('.nav-btn[onclick="showPage(\'games\')"]').classList.add('active');
                    break;
                case 'forum':
                    loadForumThreads();
                    document.querySelector('.nav-btn[onclick="showPage(\'forum\')"]').classList.add('active');
                    break;
                case 'uploads':
                    loadMyUploads();
                    break;
                case 'profile':
                    loadProfile();
                    break;
            }
        }
        
        // Toggle user dropdown
        function toggleUserDropdown() {
            document.getElementById('userDropdown').classList.toggle('hidden');
        }
        
        // =============================================
        // AUTHENTICATION FUNCTIONS
        // =============================================
        
        // Check authentication state
        function checkAuth() {
            const authButtons = document.getElementById('authButtons');
            const userMenu = document.getElementById('userMenu');
            const mobileAuthButtons = document.getElementById('mobileAuthButtons');
            const mobileUserMenu = document.getElementById('mobileUserMenu');
            
            if (currentUser) {
                authButtons.classList.add('hidden');
                userMenu.classList.remove('hidden');
                mobileAuthButtons.classList.add('hidden');
                mobileUserMenu.classList.remove('hidden');
                
                // Update user info
                document.getElementById('usernameDisplay').textContent = currentUser.username;
                document.getElementById('userAvatar').src = `https://ui-avatars.com/api/?name=${currentUser.username}&background=3b82f6&color=fff`;
            } else {
                authButtons.classList.remove('hidden');
                userMenu.classList.add('hidden');
                mobileAuthButtons.classList.remove('hidden');
                mobileUserMenu.classList.add('hidden');
            }
        }
        
        // Register new user
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('registerUsername').value.trim();
            const email = document.getElementById('registerEmail').value.trim();
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            
            // Validate inputs
            if (password !== confirmPassword) {
                showModal('Error', 'Password dan konfirmasi password tidak cocok.');
                return;
            }
            
            if (password.length < 6) {
                showModal('Error', 'Password harus minimal 6 karakter.');
                return;
            }
            
            // Check if username or email already exists
            const users = JSON.parse(localStorage.getItem('modhub_users'));
            const usernameExists = users.some(user => user.username.toLowerCase() === username.toLowerCase());
            const emailExists = users.some(user => user.email.toLowerCase() === email.toLowerCase());
            
            if (usernameExists) {
                showModal('Error', 'Username sudah digunakan. Silakan pilih username lain.');
                return;
            }
            
            if (emailExists) {
                showModal('Error', 'Email sudah terdaftar. Silakan gunakan email lain.');
                return;
            }
            
            // Create new user
            const newUser = {
                id: Date.now().toString(),
                username,
                email,
                password, // Note: In a real app, never store plain text passwords!
                joinDate: new Date().toISOString(),
                bio: '',
                avatar: `https://ui-avatars.com/api/?name=${username}&background=random&color=fff`
            };
            
            users.push(newUser);
            localStorage.setItem('modhub_users', JSON.stringify(users));
            
            // Auto login
            currentUser = newUser;
            sessionStorage.setItem('modhub_current_user', JSON.stringify(currentUser));
            checkAuth();
            
            showModal('Sukses', 'Pendaftaran berhasil! Anda sekarang sudah masuk.');
            showPage('home');
        });
        
        // Login user
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value;
            const rememberMe = document.getElementById('rememberMe').checked;
            
            // Find user
            const users = JSON.parse(localStorage.getItem('modhub_users'));
            const user = users.find(u => 
                (u.username.toLowerCase() === username.toLowerCase() || u.email.toLowerCase() === username.toLowerCase()) && 
                u.password === password
            );
            
            if (!user) {
                showModal('Error', 'Username/email atau password salah.');
                return;
            }
            
            // Login successful
            currentUser = user;
            
            if (rememberMe) {
                localStorage.setItem('modhub_remember_user', JSON.stringify({ username: user.username }));
            }
            
            sessionStorage.setItem('modhub_current_user', JSON.stringify(currentUser));
            checkAuth();
            
            showModal('Sukses', `Selamat datang kembali, ${user.username}!`);
            showPage('home');
        });
        
        // Logout
        function logout() {
            currentUser = null;
            sessionStorage.removeItem('modhub_current_user');
            checkAuth();
            showPage('home');
        }
        
        // Check for remembered user
        function checkRememberedUser() {
            const remembered = JSON.parse(localStorage.getItem('modhub_remember_user'));
            if (remembered) {
                document.getElementById('loginUsername').value = remembered.username;
                document.getElementById('rememberMe').checked = true;
            }
        }
        
        // =============================================
        // MOD FUNCTIONS
        // =============================================
        
        // Load featured mods
        function loadFeaturedMods() {
            const mods = JSON.parse(localStorage.getItem('modhub_mods'));
            const featuredModsContainer = document.getElementById('featuredMods');
            
            // Filter public mods and sort by newest
            const publicMods = mods.filter(mod => mod.visibility === 'Public')
                                  .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
                                  .slice(0, 8);
            
            if (publicMods.length > 0) {
                featuredModsContainer.innerHTML = publicMods.map(mod => createModCard(mod)).join('');
            } else {
                featuredModsContainer.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <i class="fas fa-box-open text-5xl text-gray-500 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-400">Belum ada mod yang tersedia</h3>
                        <p class="text-gray-500 mb-4">Jadilah yang pertama mengunggah mod!</p>
                        <button onclick="showPage('uploadForm')" class="px-4 py-2 gradient-bg text-white rounded-full hover:opacity-90 transition">
                            <i class="fas fa-plus mr-2"></i> Unggah Mod
                        </button>
                    </div>
                `;
            }
        }
        
        // Load games
        function loadGames() {
            const games = JSON.parse(localStorage.getItem('modhub_games'));
            const gtaGamesContainer = document.getElementById('gtaGames');
            const otherGamesContainer = document.getElementById('otherGames');
            
            // Filter GTA games
            const gtaGames = games.filter(game => game.category === 'GTA');
            const otherGames = games.filter(game => game.category !== 'GTA');
            
            // Populate GTA games
            gtaGamesContainer.innerHTML = gtaGames.map(game => `
                <div onclick="showModsByGame('${game.id}')" class="bg-gray-800 rounded-lg overflow-hidden shadow-md card-hover cursor-pointer">
                    <img src="${game.image}" alt="${game.name}" class="w-full h-40 object-cover">
                    <div class="p-4">
                        <h3 class="font-semibold text-white">${game.name}</h3>
                        <p class="text-sm text-gray-400">GTA Series</p>
                    </div>
                </div>
            `).join('');
            
            // Populate other games
            otherGamesContainer.innerHTML = otherGames.map(game => `
                <div onclick="showModsByGame('${game.id}')" class="bg-gray-800 rounded-lg overflow-hidden shadow-md card-hover cursor-pointer">
                    <img src="${game.image}" alt="${game.name}" class="w-full h-40 object-cover">
                    <div class="p-4">
                        <h3 class="font-semibold text-white">${game.name}</h3>
                    </div>
                </div>
            `).join('');
        }
        
        // Show mods by game
        function showModsByGame(gameId) {
            const games = JSON.parse(localStorage.getItem('modhub_games'));
            const game = games.find(g => g.id === gameId);
            
            if (!game) return;
            
            document.getElementById('gameModsTitle').textContent = `Mod untuk ${game.name}`;
            
            const mods = JSON.parse(localStorage.getItem('modhub_mods'));
            const gameMods = mods.filter(mod => mod.gameName === game.name && mod.visibility === 'Public');
            
            const modsContainer = document.getElementById('modsByGameList');
            const noModsMessage = document.getElementById('noModsForGame');
            
            if (gameMods.length > 0) {
                modsContainer.innerHTML = gameMods.map(mod => createModCard(mod)).join('');
                noModsMessage.classList.add('hidden');
            } else {
                modsContainer.innerHTML = '';
                noModsMessage.classList.remove('hidden');
            }
            
            showPage('modsByGame');
        }
        
        // Create mod card HTML
        function createModCard(mod) {
            const authorName = mod.isOwnMod ? (currentUser && mod.authorId === currentUser.id ? 'Anda' : 'Pembuat Mod') : mod.customAuthorName;
            
            return `
                <div class="bg-gray-800 rounded-xl shadow-lg overflow-hidden card-hover fade-in">
                    <img src="${mod.mainPhoto}" alt="${mod.modName}" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h3 class="font-bold text-white text-lg mb-1 truncate">${mod.modName}</h3>
                        <p class="text-gray-400 text-sm mb-2">${mod.gameName} • ${mod.modVersion}</p>
                        <p class="text-gray-400 text-sm mb-3">Oleh: ${authorName}</p>
                        
                        <div class="flex justify-between items-center">
                            <span class="px-2 py-1 bg-gray-700 rounded-full text-xs ${mod.isPaidMod ? 'text-yellow-400' : 'text-green-400'}">
                                ${mod.isPaidMod ? 'Berbayar' : 'Gratis'}
                            </span>
                            <button onclick="showModDetail('${mod.id}')" class="px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded-full text-white text-sm transition">
                                Lihat Detail
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // Show mod detail
        function showModDetail(modId) {
            const mods = JSON.parse(localStorage.getItem('modhub_mods'));
            const mod = mods.find(m => m.id === modId);
            
            if (!mod) {
                showModal('Error', 'Mod tidak ditemukan.');
                return;
            }
            
            const authorName = mod.isOwnMod ? (currentUser && mod.authorId === currentUser.id ? 'Anda' : 'Pembuat Mod') : mod.customAuthorName;
            const sourceLink = mod.source ? `<a href="${mod.source}" target="_blank" class="text-blue-400 hover:underline">${new URL(mod.source).hostname}</a>` : 'Tidak ada';
            const videoTutorial = mod.videoTutorial ? `
                <div class="mt-6">
                    <h4 class="text-lg font-semibold text-white mb-2">Video Tutorial</h4>
                    <div class="aspect-w-16 aspect-h-9">
                        <iframe src="${mod.videoTutorial.replace('watch?v=', 'embed/')}" class="w-full h-64 rounded-lg" frameborder="0" allowfullscreen></iframe>
                    </div>
                </div>
            ` : '';
            
            const modalContent = `
                <div class="space-y-4">
                    <div class="flex flex-col md:flex-row gap-6">
                        <div class="md:w-1/3">
                            <img src="${mod.smallPhoto}" alt="${mod.modName}" class="w-full rounded-lg">
                        </div>
                        <div class="md:w-2/3">
                            <h3 class="text-2xl font-bold text-white mb-2">${mod.modName}</h3>
                            <p class="text-gray-300 mb-4">${mod.description}</p>
                            
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <p class="text-gray-400 text-sm">Game</p>
                                    <p class="text-white">${mod.gameName}</p>
                                </div>
                                <div>
                                    <p class="text-gray-400 text-sm">Versi</p>
                                    <p class="text-white">${mod.modVersion}</p>
                                </div>
                                <div>
                                    <p class="text-gray-400 text-sm">Kategori</p>
                                    <p class="text-white">${mod.modCategory}</p>
                                </div>
                                <div>
                                    <p class="text-gray-400 text-sm">Bahasa</p>
                                    <p class="text-white">${mod.modLanguage}</p>
                                </div>
                                <div>
                                    <p class="text-gray-400 text-sm">Pembuat</p>
                                    <p class="text-white">${authorName}</p>
                                </div>
                                <div>
                                    <p class="text-gray-400 text-sm">Sumber</p>
                                    <p class="text-white">${sourceLink}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    ${videoTutorial}
                    
                    <div class="pt-4 border-t border-gray-700">
                        <a href="${mod.fileLink}" target="_blank" class="w-full gradient-bg text-white py-3 px-6 rounded-lg font-semibold hover:opacity-90 transition flex items-center justify-center">
                            <i class="fas fa-download mr-2"></i> Unduh Mod
                        </a>
                    </div>
                </div>
            `;
            
            showModal(mod.modName, modalContent, true);
        }
        
        // Load my uploads
        function loadMyUploads() {
            if (!currentUser) {
                document.getElementById('myUploadsList').innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <i class="fas fa-exclamation-circle text-5xl text-yellow-400 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-400">Anda belum masuk</h3>
                        <p class="text-gray-500 mb-4">Silakan masuk untuk melihat unggahan Anda.</p>
                        <button onclick="showPage('login')" class="px-4 py-2 gradient-bg text-white rounded-full hover:opacity-90 transition">
                            <i class="fas fa-sign-in-alt mr-2"></i> Masuk
                        </button>
                    </div>
                `;
                document.getElementById('noUploadsMessage').classList.add('hidden');
                return;
            }
            
            const mods = JSON.parse(localStorage.getItem('modhub_mods'));
            const myMods = mods.filter(mod => mod.authorId === currentUser.id);
            
            const uploadsContainer = document.getElementById('myUploadsList');
            const noUploadsMessage = document.getElementById('noUploadsMessage');
            
            if (myMods.length > 0) {
                uploadsContainer.innerHTML = myMods.map(mod => createModCard(mod)).join('');
                noUploadsMessage.classList.add('hidden');
            } else {
                uploadsContainer.innerHTML = '';
                noUploadsMessage.classList.remove('hidden');
            }
        }
        
        // Handle mod upload form
        document.getElementById('modUploadForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!currentUser) {
                showModal('Error', 'Anda harus masuk untuk mengunggah mod.');
                showPage('login');
                return;
            }
            
            const form = e.target;
            const isOwnMod = form.isOwnMod.checked;
            const customAuthorName = form.customAuthorName.value;
            
            // Validate author name if not own mod
            if (!isOwnMod && !customAuthorName) {
                showModal('Error', 'Harap masukkan nama pembuat mod jika bukan milik Anda.');
                return;
            }
            
            // Create new mod
            const newMod = {
                id: Date.now().toString(),
                gameName: form.gameName.value,
                modName: form.modName.value,
                modVersion: form.modVersion.value,
                modCategory: form.modCategory.value,
                fileLink: form.modFileLink.value,
                source: form.modSource.value || null,
                mainPhoto: form.modMainPhoto.value,
                smallPhoto: form.modSmallPhoto.value,
                description: form.modDescription.value,
                isOwnMod: isOwnMod,
                customAuthorName: isOwnMod ? '' : customAuthorName,
                authorId: currentUser.id,
                modLanguage: form.modLanguage.value,
                videoTutorial: form.modVideoTutorial.value || null,
                isPaidMod: form.isPaidMod.checked,
                visibility: form.querySelector('input[name="visibility"]:checked').value,
                createdAt: new Date().toISOString()
            };
            
            // Save mod
            const mods = JSON.parse(localStorage.getItem('modhub_mods'));
            mods.push(newMod);
            localStorage.setItem('modhub_mods', JSON.stringify(mods));
            
            showModal('Sukses', 'Mod berhasil diunggah!');
            form.reset();
            showPage('uploads');
        });
        
        // Toggle author name field
        document.getElementById('isOwnMod').addEventListener('change', function() {
            const authorContainer = document.getElementById('authorNameContainer');
            if (this.checked) {
                authorContainer.classList.add('hidden');
            } else {
                authorContainer.classList.remove('hidden');
            }
        });
        
        // Populate game select in upload form
        function populateGameSelect() {
            const games = JSON.parse(localStorage.getItem('modhub_games'));
            const gameSelect = document.getElementById('gameName');
            
            gameSelect.innerHTML = '<option value="">-- Pilih Game --</option>';
            games.forEach(game => {
                const option = document.createElement('option');
                option.value = game.name;
                option.textContent = game.name;
                gameSelect.appendChild(option);
            });
        }
        
        // =============================================
        // FORUM FUNCTIONS
        // =============================================
        
        // Load forum threads
        function loadForumThreads() {
            const threads = JSON.parse(localStorage.getItem('modhub_threads'));
            const threadsContainer = document.getElementById('forumThreadsList');
            const noThreadsMessage = document.getElementById('noThreadsMessage');
            
            // Sort by newest first
            const sortedThreads = [...threads].sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
            
            if (sortedThreads.length > 0) {
                threadsContainer.innerHTML = sortedThreads.map(thread => createThreadRow(thread)).join('');
                noThreadsMessage.classList.add('hidden');
            } else {
                threadsContainer.innerHTML = '';
                noThreadsMessage.classList.remove('hidden');
            }
        }
        
        // Create thread row HTML
        function createThreadRow(thread) {
            const users = JSON.parse(localStorage.getItem('modhub_users'));
            const author = users.find(u => u.id === thread.authorId) || { username: 'Unknown', avatar: 'https://ui-avatars.com/api/?name=Unknown&background=gray&color=fff' };
            
            // Get reply count
            const replies = JSON.parse(localStorage.getItem('modhub_replies'));
            const threadReplies = replies.filter(reply => reply.threadId === thread.id);
            
            // Get last reply if exists
            let lastReplyInfo = '';
            if (threadReplies.length > 0) {
                const lastReply = threadReplies[threadReplies.length - 1];
                const lastReplyUser = users.find(u => u.id === lastReply.authorId) || { username: 'Unknown' };
                lastReplyInfo = `
                    <div class="hidden md:block text-right">
                        <p class="text-sm text-gray-400">${formatDate(lastReply.createdAt)}</p>
                        <p class="text-sm text-gray-300">Oleh ${lastReplyUser.username}</p>
                    </div>
                `;
            } else {
                lastReplyInfo = `
                    <div class="hidden md:block text-right">
                        <p class="text-sm text-gray-400">-</p>
                    </div>
                `;
            }
            
            return `
                <div class="grid grid-cols-12 bg-gray-800 hover:bg-gray-750 border-b border-gray-700 p-4 cursor-pointer" onclick="showThread('${thread.id}')">
                    <div class="col-span-6 md:col-span-8 flex items-center">
                        <div class="w-10 h-10 rounded-full bg-gray-700 flex-shrink-0 overflow-hidden mr-3 hidden md:block">
                            <img src="${author.avatar}" alt="${author.username}" class="w-full h-full object-cover">
                        </div>
                        <div>
                            <h3 class="font-medium text-white">${thread.title}</h3>
                            <p class="text-xs text-gray-400">${author.username} • ${formatDate(thread.createdAt)}</p>
                        </div>
                    </div>
                    <div class="col-span-2 text-center hidden md:flex items-center justify-center">
                        <div class="w-8 h-8 rounded-full bg-gray-700 overflow-hidden">
                            <img src="${author.avatar}" alt="${author.username}" class="w-full h-full object-cover">
                        </div>
                    </div>
                    <div class="col-span-2 text-center flex items-center justify-center">
                        <span class="px-2 py-1 bg-gray-700 rounded-full text-sm">${threadReplies.length}</span>
                    </div>
                    ${lastReplyInfo}
                </div>
            `;
        }
        
        // Show recent threads on home page
        function loadRecentThreads() {
            const threads = JSON.parse(localStorage.getItem('modhub_threads'));
            const recentThreadsContainer = document.getElementById('recentThreads');
            
            // Sort by newest and get first 3
            const recentThreads = [...threads].sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt)).slice(0, 3);
            
            if (recentThreads.length > 0) {
                recentThreadsContainer.innerHTML = recentThreads.map(thread => createThreadCard(thread)).join('');
            } else {
                recentThreadsContainer.innerHTML = `
                    <div class="col-span-full text-center py-8">
                        <i class="fas fa-comments text-3xl text-gray-500 mb-2"></i>
                        <p class="text-gray-400">Belum ada thread diskusi</p>
                    </div>
                `;
            }
        }
        
        // Create thread card HTML
        function createThreadCard(thread) {
            const users = JSON.parse(localStorage.getItem('modhub_users'));
            const author = users.find(u => u.id === thread.authorId) || { username: 'Unknown', avatar: 'https://ui-avatars.com/api/?name=Unknown&background=gray&color=fff' };
            
            // Get reply count
            const replies = JSON.parse(localStorage.getItem('modhub_replies'));
            const threadReplies = replies.filter(reply => reply.threadId === thread.id);
            
            // Shorten content
            const shortContent = thread.content.length > 100 ? thread.content.substring(0, 100) + '...' : thread.content;
            
            return `
                <div class="bg-gray-800 rounded-xl shadow-lg overflow-hidden card-hover">
                    <div class="p-6">
                        <span class="inline-block px-3 py-1 bg-gray-700 rounded-full text-xs text-blue-400 mb-3">${thread.category}</span>
                        <h3 class="font-bold text-white text-lg mb-2">${thread.title}</h3>
                        <p class="text-gray-400 text-sm mb-4">${shortContent}</p>
                        
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <img src="${author.avatar}" alt="${author.username}" class="w-8 h-8 rounded-full mr-2">
                                <span class="text-gray-300 text-sm">${author.username}</span>
                            </div>
                            <span class="text-gray-400 text-sm">${threadReplies.length} balasan</span>
                        </div>
                    </div>
                    <button onclick="showThread('${thread.id}'); event.stopPropagation();" class="w-full py-2 bg-gray-700 hover:bg-gray-600 text-white transition">
                        Lihat Thread
                    </button>
                </div>
            `;
        }
        
        // Show thread detail
        function showThread(threadId) {
            const threads = JSON.parse(localStorage.getItem('modhub_threads'));
            const thread = threads.find(t => t.id === threadId);
            
            if (!thread) {
                showModal('Error', 'Thread tidak ditemukan.');
                return;
            }
            
            const users = JSON.parse(localStorage.getItem('modhub_users'));
            const author = users.find(u => u.id === thread.authorId) || { username: 'Unknown', avatar: 'https://ui-avatars.com/api/?name=Unknown&background=gray&color=fff' };
            
            // Get replies
            const replies = JSON.parse(localStorage.getItem('modhub_replies'));
            const threadReplies = replies.filter(reply => reply.threadId === thread.id)
                                       .sort((a, b) => new Date(a.createdAt) - new Date(b.createdAt));
            
            // Populate thread info
            document.getElementById('threadTitle').textContent = thread.title;
            document.getElementById('threadAuthor').textContent = author.username;
            document.getElementById('threadDate').textContent = formatDate(thread.createdAt);
            document.getElementById('threadCategory').textContent = thread.category;
            document.getElementById('threadContent').innerHTML = thread.content.replace(/\n/g, '<br>');
            document.getElementById('likeCount').textContent = thread.likes || 0;
            
            // Populate replies
            const repliesContainer = document.getElementById('repliesContainer');
            if (threadReplies.length > 0) {
                repliesContainer.innerHTML = threadReplies.map(reply => createReplyElement(reply)).join('');
            } else {
                repliesContainer.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-comment-slash text-3xl mb-2"></i>
                        <p>Belum ada balasan</p>
                    </div>
                `;
            }
            
            // Set up reply form
            document.getElementById('replyForm').onsubmit = function(e) {
                e.preventDefault();
                
                if (!currentUser) {
                    showModal('Error', 'Anda harus masuk untuk membalas thread.');
                    showPage('login');
                    return;
                }
                
                const content = document.getElementById('replyContent').value.trim();
                
                if (!content) {
                    showModal('Error', 'Silakan tulis balasan Anda.');
                    return;
                }
                
                // Create new reply
                const newReply = {
                    id: Date.now().toString(),
                    threadId: thread.id,
                    authorId: currentUser.id,
                    content,
                    createdAt: new Date().toISOString()
                };
                
                // Save reply
                const allReplies = JSON.parse(localStorage.getItem('modhub_replies'));
                allReplies.push(newReply);
                localStorage.setItem('modhub_replies', JSON.stringify(allReplies));
                
                // Update UI
                const replyElement = createReplyElement(newReply);
                if (repliesContainer.querySelector('.text-center')) {
                    repliesContainer.innerHTML = replyElement;
                } else {
                    repliesContainer.insertAdjacentHTML('beforeend', replyElement);
                }
                
                document.getElementById('replyContent').value = '';
                
                // Update thread list
                loadForumThreads();
                loadRecentThreads();
            };
            
            // Set up like button
            document.getElementById('likeThreadBtn').onclick = function() {
                if (!currentUser) {
                    showModal('Error', 'Anda harus masuk untuk menyukai thread.');
                    showPage('login');
                    return;
                }
                
                // Toggle like
                thread.likes = (thread.likes || 0) + 1;
                localStorage.setItem('modhub_threads', JSON.stringify(threads));
                
                document.getElementById('likeCount').textContent = thread.likes;
            };
            
            showPage('thread');
        }
        
        // Create reply element
        function createReplyElement(reply) {
            const users = JSON.parse(localStorage.getItem('modhub_users'));
            const author = users.find(u => u.id === reply.authorId) || { username: 'Unknown', avatar: 'https://ui-avatars.com/api/?name=Unknown&background=gray&color=fff' };
            
            const isAuthor = currentUser && reply.authorId === currentUser.id;
            
            return `
                <div class="bg-gray-800 rounded-xl shadow-lg p-6">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center space-x-3">
                            <img src="${author.avatar}" alt="${author.username}" class="w-10 h-10 rounded-full">
                            <div>
                                <h4 class="font-semibold text-white">${author.username}</h4>
                                <p class="text-xs text-gray-400">${formatDate(reply.createdAt)}</p>
                            </div>
                        </div>
                        ${isAuthor ? `
                            <button onclick="deleteReply('${reply.id}')" class="text-gray-400 hover:text-red-400 transition">
                                <i class="fas fa-trash"></i>
                            </button>
                        ` : ''}
                    </div>
                    <div class="prose prose-invert max-w-none text-gray-300">
                        ${reply.content.replace(/\n/g, '<br>')}
                    </div>
                </div>
            `;
        }
        
        // Delete reply
        function deleteReply(replyId) {
            if (!confirm('Apakah Anda yakin ingin menghapus balasan ini?')) return;
            
            const replies = JSON.parse(localStorage.getItem('modhub_replies'));
            const updatedReplies = replies.filter(reply => reply.id !== replyId);
            
            localStorage.setItem('modhub_replies', JSON.stringify(updatedReplies));
            
            // Reload thread
            const threadId = document.getElementById('threadTitle').getAttribute('data-thread-id');
            showThread(threadId);
        }
        
        // Handle new thread form
        document.getElementById('newThreadForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!currentUser) {
                showModal('Error', 'Anda harus masuk untuk membuat thread baru.');
                showPage('login');
                return;
            }
            
            const form = e.target;
            const title = form.threadTitle.value.trim();
            const category = form.threadCategory.value;
            const content = form.threadContent.value.trim();
            
            if (!title || !category || !content) {
                showModal('Error', 'Harap isi semua field yang diperlukan.');
                return;
            }
            
            // Create new thread
            const newThread = {
                id: Date.now().toString(),
                title,
                category,
                content,
                authorId: currentUser.id,
                createdAt: new Date().toISOString(),
                likes: 0
            };
            
            // Save thread
            const threads = JSON.parse(localStorage.getItem('modhub_threads'));
            threads.push(newThread);
            localStorage.setItem('modhub_threads', JSON.stringify(threads));
            
            showModal('Sukses', 'Thread berhasil dibuat!');
            form.reset();
            showPage('forum');
        });
        
        // =============================================
        // PROFILE FUNCTIONS
        // =============================================
        
        // Load profile
        function loadProfile() {
            if (!currentUser) {
                showModal('Error', 'Anda harus masuk untuk melihat profil.');
                showPage('login');
                return;
            }
            
            // Basic info
            document.getElementById('profileUsername').textContent = currentUser.username;
            document.getElementById('profileEmail').textContent = currentUser.email;
            document.getElementById('profileAvatar').src = currentUser.avatar;
            document.getElementById('joinDate').textContent = formatDate(currentUser.joinDate);
            
            // Stats
            const mods = JSON.parse(localStorage.getItem('modhub_mods'));
            const userMods = mods.filter(mod => mod.authorId === currentUser.id);
            document.getElementById('totalUploads').textContent = userMods.length;
            
            const threads = JSON.parse(localStorage.getItem('modhub_threads'));
            const userThreads = threads.filter(thread => thread.authorId === currentUser.id);
            document.getElementById('totalThreads').textContent = userThreads.length;
            
            // Recent uploads
            const uploadsContainer = document.getElementById('profileUploads');
            const noUploadsMessage = document.getElementById('noProfileUploads');
            
            if (userMods.length > 0) {
                uploadsContainer.innerHTML = userMods.slice(0, 3).map(mod => createProfileModCard(mod)).join('');
                noUploadsMessage.classList.add('hidden');
            } else {
                uploadsContainer.innerHTML = '';
                noUploadsMessage.classList.remove('hidden');
            }
            
            // Recent threads
            const threadsContainer = document.getElementById('profileThreads');
            const noThreadsMessage = document.getElementById('noProfileThreads');
            
            if (userThreads.length > 0) {
                threadsContainer.innerHTML = userThreads.slice(0, 3).map(thread => createProfileThreadCard(thread)).join('');
                noThreadsMessage.classList.add('hidden');
            } else {
                threadsContainer.innerHTML = '';
                noThreadsMessage.classList.remove('hidden');
            }
        }
        
        // Create profile mod card
        function createProfileModCard(mod) {
            return `
                <div class="bg-gray-750 rounded-lg p-4 flex items-center space-x-3">
                    <img src="${mod.mainPhoto}" alt="${mod.modName}" class="w-12 h-12 rounded-lg object-cover">
                    <div>
                        <h4 class="font-medium text-white text-sm truncate">${mod.modName}</h4>
                        <p class="text-gray-400 text-xs">${mod.gameName}</p>
                    </div>
                </div>
            `;
        }
        
        // Create profile thread card
        function createProfileThreadCard(thread) {
            return `
                <div class="bg-gray-750 rounded-lg p-4">
                    <h4 class="font-medium text-white text-sm mb-1">${thread.title}</h4>
                    <p class="text-gray-400 text-xs mb-2">${thread.category}</p>
                    <p class="text-gray-500 text-xs">${formatDate(thread.createdAt)}</p>
                </div>
            `;
        }
        
        // Handle edit profile form
        document.getElementById('editProfileForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('editUsername').value.trim();
            const email = document.getElementById('editEmail').value.trim();
            const bio = document.getElementById('editBio').value.trim();
            
            if (!username || !email) {
                showModal('Error', 'Username dan email harus diisi.');
                return;
            }
            
            // Check if username or email already exists (except current user)
            const users = JSON.parse(localStorage.getItem('modhub_users'));
            const usernameExists = users.some(user => 
                user.username.toLowerCase() === username.toLowerCase() && 
                user.id !== currentUser.id
            );
            
            const emailExists = users.some(user => 
                user.email.toLowerCase() === email.toLowerCase() && 
                user.id !== currentUser.id
            );
            
            if (usernameExists) {
                showModal('Error', 'Username sudah digunakan. Silakan pilih username lain.');
                return;
            }
            
            if (emailExists) {
                showModal('Error', 'Email sudah terdaftar. Silakan gunakan email lain.');
                return;
            }
            
            // Update user
            const updatedUser = {
                ...currentUser,
                username,
                email,
                bio
            };
            
            // Update in users array
            const updatedUsers = users.map(user => 
                user.id === currentUser.id ? updatedUser : user
            );
            
            localStorage.setItem('modhub_users', JSON.stringify(updatedUsers));
            sessionStorage.setItem('modhub_current_user', JSON.stringify(updatedUser));
            currentUser = updatedUser;
            
            showModal('Sukses', 'Profil berhasil diperbarui!');
            showPage('profile');
        });
        
        // Handle change password form
        document.getElementById('changePasswordForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmNewPassword = document.getElementById('confirmNewPassword').value;
            
            if (currentPassword !== currentUser.password) {
                showModal('Error', 'Password saat ini salah.');
                return;
            }
            
            if (newPassword.length < 6) {
                showModal('Error', 'Password baru harus minimal 6 karakter.');
                return;
            }
            
            if (newPassword !== confirmNewPassword) {
                showModal('Error', 'Password baru dan konfirmasi tidak cocok.');
                return;
            }
            
            // Update password
            const users = JSON.parse(localStorage.getItem('modhub_users'));
            const updatedUsers = users.map(user => {
                if (user.id === currentUser.id) {
                    return { ...user, password: newPassword };
                }
                return user;
            });
            
            localStorage.setItem('modhub_users', JSON.stringify(updatedUsers));
            sessionStorage.setItem('modhub_current_user', JSON.stringify({
                ...currentUser,
                password: newPassword
            }));
            
            showModal('Sukses', 'Password berhasil diubah!');
            document.getElementById('changePasswordForm').reset();
        });
        
        // Change avatar
        function changeAvatar() {
            const newAvatar = prompt('Masukkan URL avatar baru:');
            if (newAvatar) {
                document.getElementById('editProfileAvatar').src = newAvatar;
                
                // Update in current user
                const updatedUser = {
                    ...currentUser,
                    avatar: newAvatar
                };
                
                // Update in users array
                const users = JSON.parse(localStorage.getItem('modhub_users'));
                const updatedUsers = users.map(user => 
                    user.id === currentUser.id ? updatedUser : user
                );
                
                localStorage.setItem('modhub_users', JSON.stringify(updatedUsers));
                sessionStorage.setItem('modhub_current_user', JSON.stringify(updatedUser));
                currentUser = updatedUser;
                
                // Update avatar in UI
                document.getElementById('userAvatar').src = newAvatar;
                document.getElementById('profileAvatar').src = newAvatar;
                
                showModal('Sukses', 'Avatar berhasil diubah!');
            }
        }
        
        // =============================================
        // INITIALIZATION
        // =============================================
        
        // Initialize event listeners
        function initEventListeners() {
            // Mobile menu toggle
            document.getElementById('mobileMenuButton').addEventListener('click', function() {
                document.getElementById('mobileMenu').classList.toggle('hidden');
            });
            
            // User menu toggle
            document.getElementById('userMenuButton').addEventListener('click', function(e) {
                e.stopPropagation();
                document.getElementById('userDropdown').classList.toggle('hidden');
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function() {
                document.getElementById('userDropdown').classList.add('hidden');
            });
            
            // Check for remembered user
            checkRememberedUser();
            
            // Populate game select in upload form
            populateGameSelect();
            
            // Check auth state
            checkAuth();
            
            // Load home page if no hash
            if (!window.location.hash) {
                showPage('home');
            }
        }
        
        // Initialize the app
        function init() {
            initEventListeners();
            
            // Check for hash in URL
            if (window.location.hash) {
                const pageId = window.location.hash.substring(1);
                showPage(pageId);
            }
        }
        
        // Start the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
